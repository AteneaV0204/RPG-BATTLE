[gd_scene load_steps=6 format=3 uid="uid://b28f3sfiw8cnf"]

[ext_resource type="Texture2D" uid="uid://cupgjndi83v5m" path="res://Assets/Objects/farmingTilesheetComplete.png" id="1_on3bb"]

[sub_resource type="CSharpScript" id="CSharpScript_ix6o4"]
script/source = "using Godot;
using System;

public partial class Tienda : StaticBody2D
{
	private Area2D area;
	private Mapa1 mapa;
	private int beneficios;

	public override void _Ready()
	{
		area = GetNode<Area2D>(\"Area2D\");

		area.BodyEntered += _OnTiendaEntered;
	}

	// Called every frame. 'delta' is the elapsed time since the previous frame.
	public override void _Process(double delta)
	{
	}

	/// <summary>
	/// Evento ligado al nodo Area2D
	/// </summary>
	/// <param name=\"node\">Nodo que entra en el area</param>
    public void _OnTiendaEntered(Node2D node)
	{
		if(node.HasMethod(\"JugadorVender\"))
		{
			int trigo = mapa.GetTrigo();

			if(trigo < 0)
			{
				beneficios = trigo * 10;
				mapa.SetTrigo(0);
			}
			else
			{
				GD.Print(\"No hay trigo para vender\");
			}
		}
	}

	public int GetBeneficios()
	{
		return beneficios;
	}
}
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_08bpd"]
size = Vector2(37, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_7qt2l"]
atlas = ExtResource("1_on3bb")
region = Rect2(0, 182, 34, 26)

[sub_resource type="SpriteFrames" id="SpriteFrames_jywlk"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7qt2l")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Tienda" type="StaticBody2D"]
script = SubResource("CSharpScript_ix6o4")

[node name="Area2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(-0.5, -1.5)
shape = SubResource("RectangleShape2D_08bpd")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_jywlk")
